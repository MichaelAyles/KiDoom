# Quick Start: Smiley Face Test

This test verifies that the timer-based rendering architecture works on macOS.

## Quick Steps

```bash
# 1. Close KiCad completely
killall kicad

# 2. Enable test mode and launch KiCad
export KIDOOM_TEST_MODE=true
open -a KiCad
```

## In KiCad

1. Open any PCB (or create a blank one)
2. Tools → External Plugins → **"KiDoom - DOOM on PCB"**
3. Watch for a rotating smiley face made of PCB traces
4. Click OK to stop when done

## What Should Happen

✅ **Success**: You see a rotating smiley face, smooth animation, no crash
- This means the timer architecture works
- The issue with DOOM plugin is in the queue/threading implementation
- Next step: Debug the DOOM bridge queue handling

❌ **Failure**: KiCad crashes immediately or during animation
- This means even simple timer-based rendering crashes on macOS
- Fundamental compatibility issue with KiCad's wx.Timer on this platform
- Next step: Try alternative approaches (no timer, static rendering, etc.)

## Console Output (Success)

```
======================================================================
SMILEY FACE TEST - Timer-Based Rendering
======================================================================
✓ Created 68 traces for smiley face
Starting timer...
✓ Timer started (20 FPS)

======================================================================
Smiley face is animating!
Watch the PCB editor for a rotating smiley face.
Close this dialog to stop the animation.
======================================================================

Frame 20, angle 100°
Frame 40, angle 200°
Frame 60, angle 300°
...

Stopping animation...
✓ Timer stopped
Cleaning up traces...
✓ Cleanup complete
✓ Test complete
```

## Troubleshooting

**No smiley appears**:
- Zoom out (View → Zoom to Fit)
- Enable F.Cu and B.Cu layers
- Check console for errors

**Can't see the plugin**:
- Make sure plugin is installed correctly
- Refresh KiCad's plugin list (Tools → External Plugins → Refresh)
- Check KiCad console for plugin loading errors

**Test mode not activating**:
- Make sure you set the environment variable: `export KIDOOM_TEST_MODE=true`
- Launch KiCad from the same terminal where you set the variable
- macOS GUI apps don't inherit shell environment by default

## Alternative Launch Method

If environment variable doesn't work:

```python
# In KiCad Python console, before running plugin:
import os
os.environ['KIDOOM_TEST_MODE'] = 'true'
```

Then run the plugin normally.

## Disabling Test Mode

```bash
# Unset the variable
unset KIDOOM_TEST_MODE

# Or start a new terminal and launch KiCad normally
open -a KiCad
```
